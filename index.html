<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>오스월드 화이트 기록문서</title>
  <style>
    body {
      background: black;
      color: white;
      font-family: 'Courier New', monospace;
      padding: 2rem;
      line-height: 1.8;
    }
    #console {
      border-top: 1px solid #444;
      margin-top: 3rem;
      padding-top: 1rem;
      font-size: 0.9rem;
    }
    .choice-button {
      background: #111;
      color: white;
      border: 1px solid #444;
      padding: 0.5rem 1rem;
      margin: 1rem 0.5rem;
      cursor: pointer;
    }
    .choice-button:hover {
      background: #222;
    }
    .typing {
      border-right: 1px solid white;
      animation: blink 0.8s infinite;
    }
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }
  </style>
</head>
<body>
  <h1>기록 문서: ███ (기밀)</h1>
  <div id="log"></div>
  <div id="main"></div>
  <div id="console"></div>

  <script>
    const log = document.getElementById("log");
    const main = document.getElementById("main");
    const consoleEl = document.getElementById("console");

    const textLines = [
      "문서 열람 기록 확인됨.",
      "열람자 ID 추적 실패. 익명 접속으로 간주.",
      "...허가되지 않은 접근입니다.",
      "[관측: 감정 반응 미약 / 스크롤 속도 평균 이하]",
      "문서 내 객체가 자가 활성화됨...",
      "■ 오스월드의 기록이 응답을 시작합니다."
    ];

    function typeLine(text, callback) {
      let p = document.createElement("p");
      let index = 0;
      function typeChar() {
        if (index < text.length) {
          p.innerHTML = text.slice(0, index++) + '<span class="typing"></span>';
          setTimeout(typeChar, 40);
        } else {
          p.innerHTML = text;
          if (callback) setTimeout(callback, 800);
        }
      }
      log.appendChild(p);
      typeChar();
    }

    function startTyping() {
      let i = 0;
      function next() {
        if (i < textLines.length) {
          typeLine(textLines[i++], next);
        } else {
          askName();
        }
      }
      next();
    }

    function askName() {
      const input = document.createElement("input");
      input.placeholder = "당신의 이름을 입력하세요";
      input.style.marginTop = "2rem";
      input.style.padding = "0.5rem";
      input.style.fontFamily = "monospace";
      input.style.background = "black";
      input.style.color = "white";
      main.appendChild(input);

      input.addEventListener("change", () => {
        const name = input.value.trim();
        main.innerHTML = "";
        typeLine("...그래, " + name + ". 당신은 지금 누구의 시선 아래에 있는지 모르는군요.", () => {
          typeLine("이제 선택하세요.", () => showChoices(name));
        });
      });
    }

    function showChoices(name) {
      const choice1 = document.createElement("button");
      choice1.className = "choice-button";
      choice1.textContent = "기록을 계속 읽는다";
      choice1.onclick = () => {
        main.innerHTML = "";
        typeLine(name + ", 그렇게 쉽게 포기할 인물이 아니군요...", () => {
          typeLine("문서가 점차 당신을 감지하기 시작합니다...", () => {
            showFinal(name);
          });
        });
      };

      const choice2 = document.createElement("button");
      choice2.className = "choice-button";
      choice2.textContent = "기록을 닫고 떠난다";
      choice2.onclick = () => {
        main.innerHTML = "";
        typeLine("현명한 선택일지도 모르겠습니다, " + name + ".", () => {
          typeLine("...하지만 너무 늦었네요.", () => {
            typeLine("문서는 이미 당신의 이름을 기록했습니다.");
          });
        });
      };

      main.appendChild(choice1);
      main.appendChild(choice2);
    }

    function showFinal(name) {
      setTimeout(() => {
        typeLine("[비인가 열람자 " + name + "의 감정 반응 분석 중...]", () => {
          typeLine("불쾌감: 42% / 몰입도: 78% / 이탈 가능성: 15%", () => {
            typeLine("...분석 종료. 당신은 계속 이곳에 남을 것입니다.");
          });
        });
      }, 2000);
    }

    // Start
    startTyping();
  </script>
</body>
</html>
